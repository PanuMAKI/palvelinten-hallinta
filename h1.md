# H1 Viisikko
## x)
Karvinen 2025: Install Salt on Debian 13 Trixie
- teksti jossa kattavat ohjeet SALTin lataamiseen.
- salt on työkalu jolla voi hallita todella montaa Linux tai windows konetta saman aikaisesti
  
Karvinen 2023: Run Salt Command Locally
- Teksit jossa kerrotaan SALTin käytöstä ja eri komennoista.
- Miten ladata minioni, pkg.installed pitäisi ladata.

Karvinen 2018: Salt Quickstart – Salt Stack Master and Slave on Ubuntu Linux
  - teksti jossa kerrotaan miten ladataan salt master ja salt slave ja miten niiden väliin saadaan yhteys.
  - ainoastaan master tarvitsee teidoewtyn ositteen.

Karvinen 2006: Raportin kirjoittaminen
- Ohje raportin kirjoittamiseen
- Raportin tulisi olla toistettava, täsmällinen, helppolukuinen ja siinä tulee viitata läheteisiin joita käytettiin raportin tekemiseen.
## a) Debian 13 lataamien 
Sain ladattua Debian 13Trixien virtuaalikoneelleni ilman ongelmia.

## b) Saltin lataaminen  Debian 13 trixielle
Ensin tarkistin päivitykset komennolla $ sudo apt-get update ja latasin Wgetin komennolla $ sudo apt-get install wget. jonka jälkeen loin uuden hakemiston "saltrepo" komennolla $ mkdir saltrepo.
Latasin saltrepo hakemistoon wgetillä kaksi tiedostoa komennoilla : 

$ wget https://packages.broadcom.com/artifactory/api/security/keypair/SaltProjectKey/public ja
$ wget https://github.com/saltstack/salt-install-guide/releases/latest/download/salt.sources

Ladattu pgp avain pitää tarkistaa, tarkistamme että se on oikea avain, sen sijainnin ja sen URL osoite: 

$ less public	# q quits less

$ less salt.sources

$ gpg --show-key --with-fingerprint public 

tarkistuksen jälkeen avain pitää siirtää hakemistoon joka sisältää luotettavat avaimet komennolla: $ sudo cp public /etc/apt/keyrings/salt-archive-keyring.pgp

Tämän jälkeen syötämme komennon $ sudo cp salt.sources /etc/apt/sources.list.d/ jolla siirrämme ladatun osoitteen oikeaan hakemistoon.

Nyt voimme ajaa seuraavan komennon sillä tietokone tietää mistä salt ladataan ja tietää että siihen voi luottaa:

<img width="620" height="41" alt="08fb674defffcf6368abca10ba38e194" src="https://github.com/user-attachments/assets/03b2ba30-b80e-42b2-bdf4-d71f1009b7b7" />

Voimme tarkistaa saltin version seuraavalla komennolla ja tulos on: salt 3007.8 (Chlorine)
<img width="319" height="46" alt="b17ffadca7023bf270bea095d7a84d15" src="https://github.com/user-attachments/assets/f6d6713a-8edc-44ed-953a-8e44916a99e3" />

## c) Viisi tärkeää.
pkg:
sudo salt-call --local state.single pkg.installed tree: lataa ja kertoo paketin tree
sudo salt-call --local state.single pkg.removed tree: tämäkomento vuorostaan poistaa paketin latauksen.
<img width="792" height="710" alt="5bd643cf56280a2a1964460d7d469eb2" src="https://github.com/user-attachments/assets/4251baf6-9c13-42a5-b11e-3ece23cf2263" />


sudo salt-call --local state.single file.managed /tmp/helloworld: luo tiedoston nimeltä helloworld tmp directoryyn<img width="870" height="459" alt="b3eedeb45359cfa611dc63d93f626818" src="https://github.com/user-attachments/assets/182daab6-59d7-49d7-82fc-e2dd3878fca1" />


sudo salt-call --local state.single service.running apache2 enable=True: käynnistää apche 2 deamonin
sudo salt-call --local state.single service.dead apache2 enable=false: sammuttaa apachen
<img width="989" height="717" alt="05df9a3a5d73f613b7fa1ebd2f4ddc6d" src="https://github.com/user-attachments/assets/752ea888-05a1-427f-8440-6d7a69fc19e0" />

sudo salt-call --local state.single user.present pantsa: luo uuden käyttäjän pantsa
vaihtamalla user.present user.absent voit poistaa käyttäjän

sudo salt-call --local state.single cmd.run 'touch /tmp/uusi' creates="/tmp/uusi": Komento luo uuden teidoston nimeltä uusi jos sitä ei aikaisemmin ole ollut olemassa.


## d)

Impodentti on toiminto joka ei muuta loppu tulosta kuin kerran vaikka sen suorittaisi useammin.

komento: sudo salt-call --local -l info state.single service.running apache2 enable=True käynnistää deamonin apache2  mutta jos ajat sen uudestaan loppu tulos ei muutu koska apache on jo käynnissä.


  ## Lähteet
  
  https://terokarvinen.com/palvelinten-hallinta/#h1-viisikko

  
  Karvinen 2025: Install Salt on Debian 13 Trixie. 
  https://terokarvinen.com/install-salt-on-debian-13-trixie/
  
  Karvinen 2023: Run Salt Command Locally.
  https://terokarvinen.com/2021/salt-run-command-locally/
  
  Karvinen 2018: Salt Quickstart – Salt Stack Master and Slave on Ubuntu Linux
  https://terokarvinen.com/2018/03/28/salt-quickstart-salt-stack-master-and-slave-on-ubuntu-linux/
  
  Karvinen 2006: Raportin kirjoittaminen
  https://terokarvinen.com/2006/06/04/raportin-kirjoittaminen-4/
